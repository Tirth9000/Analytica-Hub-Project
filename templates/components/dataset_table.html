<p
  class="text-sm text-[#4a4a4a] font-['Inter'] leading-[1.4] tracking-[0.3px] font-semibold text-balance ml-[5px]"
>
  {{shape}}
</p>
<table
  id="csv-table"
  class="w-full border-collapse text-left text-base min-w-[600px]"
>
  <thead>
    <tr>
      {% for col in columns %}
      <th
        class="sticky top-0 z-[1] p-3 border border-[#e0e0e0] relative whitespace-nowrap bg-[#f8f9fa] shadow-sm"
      >
        {{col}}
        <div class="relative inline-block">
          <button
            class="inline bg-transparent border-none text-xs text-[#5f6368] cursor-pointer"
          >
            ▼
          </button>
          <div
            class="hidden absolute top-full left-0 bg-white border border-[#ddd] shadow-md rounded z-10 w-auto group-hover:block"
          >
            <button
              class="block w-full text-left px-4 py-2 text-sm text-[#202124] hover:bg-[#f1f3f4] cursor-pointer"
              hx-get="{% url 'details' id=file_id colName=col %}"
              hx-target=".container"
              hx-swap="innerHTML"
            >
              details
            </button>
            <button
              class="block w-full text-left px-4 py-2 text-sm text-[#202124] hover:bg-[#f1f3f4] cursor-pointer"
              hx-get="{% url 'drop_column' id=file_id colName=col %}"
              hx-target=".table-wrapper"
              hx-swap="innerHTML"
            >
              drop column
            </button>
            <div class="relative group/submenu">
              <button
                class="block w-full text-left px-4 py-2 text-sm text-[#202124] hover:bg-[#f1f3f4] cursor-pointer"
                hx-get="{% url 'dropna' id=file_id colName=col %}"
                hx-trigger="click"
                hx-target=".table-wrapper"
                hx-swap="innerHTML"
              >
                drop nan
              </button>
              <div class="relative group/submenu">
                <button
                  class="block w-full text-left px-4 py-2 text-sm text-[#202124] hover:bg-[#f1f3f4] cursor-pointer"
                >
                  Fill NaN ▸
                </button>
                <div
                  class="hidden absolute top-0 left-full bg-white border border-[#ddd] shadow-md rounded z-10 group-hover/submenu:block"
                >
                  <button
                    class="block w-full text-left px-4 py-2 text-sm text-[#202124] hover:bg-[#f1f3f4] cursor-pointer"
                    hx-get="{% url 'fillna' id=file_id colName=col method='ffill' %}"
                    hx-trigger="click"
                    hx-target=".table-wrapper"
                    hx-swap="innerHTML"
                  >
                    F-fill()
                  </button>
                  <button
                    class="block w-full text-left px-4 py-2 text-sm text-[#202124] hover:bg-[#f1f3f4] cursor-pointer"
                    hx-get="{% url 'fillna' id=file_id colName=col method='bfill' %}"
                    hx-trigger="click"
                    hx-target=".table-wrapper"
                    hx-swap="innerHTML"
                  >
                    B-fill()
                  </button>
                  <div class="relative group/submenu">
                    <button
                      class="block w-full text-left px-4 py-2 text-sm text-[#202124] hover:bg-[#f1f3f4] cursor-pointer"
                    >
                      Descriptive Statistics ▸
                    </button>
                    <div
                      class="hidden absolute top-0 left-full bg-white border border-[#ddd] shadow-md rounded z-10 group-hover/submenu:block"
                    >
                      <button
                        class="block w-full text-left px-4 py-2 text-sm text-[#202124] hover:bg-[#f1f3f4] cursor-pointer"
                        hx-get="{% url 'fillna' id=file_id colName=col method='mean' %}"
                        hx-trigger="click"
                        hx-target=".table-wrapper"
                        hx-swap="innerHTML"
                      >
                        Mean
                      </button>
                      <button
                        class="block w-full text-left px-4 py-2 text-sm text-[#202124] hover:bg-[#f1f3f4] cursor-pointer"
                        hx-get="{% url 'fillna' id=file_id colName=col method='median' %}"
                        hx-trigger="click"
                        hx-target=".table-wrapper"
                        hx-swap="innerHTML"
                      >
                        Median
                      </button>
                      <button
                        class="block w-full text-left px-4 py-2 text-sm text-[#202124] hover:bg-[#f1f3f4] cursor-pointer"
                        hx-get="{% url 'fillna' id=file_id colName=col method='mode' %}"
                        hx-trigger="click"
                        hx-target=".table-wrapper"
                        hx-swap="innerHTML"
                      >
                        Mode
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </th>
      {% endfor %}
    </tr>
  </thead>
  <tbody>
    {% for row in rows %}
    <tr class="hover:bg-[#e8eaed] even:bg-[#f1f3f4]">
      {% for value in row %}
      <td class="p-2.5 border border-[#e0e0e0] relative whitespace-nowrap">
        {{value}}
      </td>
      {% endfor %}
    </tr>
    {% endfor %}
  </tbody>
</table>
